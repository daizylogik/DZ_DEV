<apex:page controller="GridsterDemoController" showHeader="false" sidebar="false">
	<apex:includescript value="{!URLFOR($Resource.jQuery213, 'jquery-2.1.3.min.js')}"/>
    <apex:includescript value="{!URLFOR($Resource.gridster, 'jquery.gridster.min.js')}"/>
    <apex:includescript value="{!URLFOR($Resource.gridster, 'jquery.gridster.with-extras.min.js')}"/>
    <apex:stylesheet value="{!URLFOR($Resource.gridster, 'jquery.gridster.min.css')}" />
    <apex:stylesheet value="{!URLFOR($Resource.gridster, 'demo.css')}" />
    
    <script type="text/javascript">
    
		var j$ = jQuery.noConflict();
    	j$(function () {
            j$(".gridster ul").gridster({
                widget_margins: [1, 1],
                widget_base_dimensions: [100, 72],
                avoid_overlapped_widgets: true,
                draggable: {
                start: function(e, ui, $widget) {
                  //log.innerHTML = 'START position: ' + ui.position.top +' '+ ui.position.left + "<br >" + log.innerHTML;
                  dragProject(ui);
                },

                /*drag: function(e, ui, $widget) {
                  log.innerHTML = 'DRAG offset: ' + ui.pointer.diff_top +' '+ ui.pointer.diff_left + "<br >" + log.innerHTML;
                },*/

                stop: function(e, ui, $widget) {
                  //log.innerHTML = 'STOP position: ' + ui.position.top +' '+ ui.position.left + "<br >" + log.innerHTML;
                    dropProject(ui);
                }
              }
            });
            
            var gridster = j$(".gridster ul").gridster().data('gridster');
            //gridster.disable();
            
            /*j$( ".gridster .date > a" ).click(function() {
  				event.preventDefault();
			});*/     
        });
    
        function dragProject(ui) {
            alert('old row' + ui.$player.data('row'));
            alert('old col' + ui.$player.data('col'));
        }

        function dropProject(ui) {
            alert('new row' + ui.$player[0].dataset.row);
            alert('new col' + ui.$player[0].dataset.col);
        }


    </script>

    <apex:form >
	    <apex:pageMessages />
	</apex:form>

	<div class="gridster">
    	<ul>
            <apex:repeat value="{!Matrix}" var="item">
                <li class="{!item.cssClass}" data-row="{!item.dataRow}" data-col="{!item.dataCol}" data-sizex="{!item.dataSizeX}" data-sizey="{!item.dataSizeY}">
                	<apex:outputText value="{!item.label}" escape="false" />
                </li>
            </apex:repeat>
		</ul>
    </div>


</apex:page>